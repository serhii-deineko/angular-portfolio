@use "@angular/material" as mat;

/* ========== Global Theme Variables ========== */
:root {
	// Dark Mode Colors (default)
	--dark: #1d1d1d;
	--dark-bg: #101010;
	--dark-bg-secondary: #303030;
	--dark-bg-tertiary: #505050;
	--dark-text: #909090;
	--dark-text-secondary: #a5a5a5;
	--dark-text-tertiary: #c5c5c5;
	--dark-accent: #f5f5f5;

	// Light Mode Colors
	--light: #ffffff;
	--light-bg: #f5f5f5;
	--light-bg-secondary: #e5e5e5;
	--light-bg-tertiary: #d5d5d5;
	--light-text: #606060;
	--light-text-secondary: #454545;
	--light-text-tertiary: #303030;
	--light-accent: #151515;

	// Common Variables
	--font-sans: "Inter", -apple-system, system-ui, sans-serif;
	--font-mono: monospace, -apple-system, system-ui, sans-serif;
	--nav-height: 70px;
	--scrollbar-width: 8px;
	--footer-height: 70px;
	--transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

	// Default theme variables (will be overridden by theme classes)
	--bg: var(--dark);
	--bg-color: var(--dark-bg);
	--bg-color-secondary: var(--dark-bg-secondary);
	--bg-color-tertiary: var(--dark-bg-tertiary);
	--text: var(--dark-text);
	--text-color: var(--dark-text);
	--text-color-secondary: var(--dark-text-secondary);
	--text-color-highlight: var(--dark-text-tertiary);
	--accent-color: var(--dark-accent);
	--border-color: var(--dark-bg-tertiary);

	// Icon filter variables for dark mode
	--icon-invert: 0.7;
	--icon-invert-hover: 0.9;
}

/* Dark mode class (explicit) */
body.dark-mode {
	--bg: var(--dark);
	--bg-color: var(--dark-bg);
	--bg-color-secondary: var(--dark-bg-secondary);
	--bg-color-tertiary: var(--dark-bg-tertiary);
	--text: var(--dark-text);
	--text-color: var(--dark-text);
	--text-color-secondary: var(--dark-text-secondary);
	--text-color-highlight: var(--dark-text-tertiary);
	--accent-color: var(--dark-accent);
	--border-color: var(--dark-bg-tertiary);

	// Icon filter variables for dark mode
	--icon-invert: 0.7;
	--icon-invert-hover: 0.9;
}

/* Light mode class that overrides the default dark theme */
body.light-mode {
	--bg: var(--light);
	--bg-color: var(--light-bg);
	--bg-color-secondary: var(--light-bg-secondary);
	--bg-color-tertiary: var(--light-bg-tertiary);
	--text: var(--dark-text);
	--text-color: var(--light-text-secondary);
	--text-color-secondary: var(--light-text-tertiary);
	--text-color-highlight: var(--light-text);
	--accent-color: var(--light-accent);
	--border-color: var(--light-bg-tertiary);

	// Icon filter variables for light mode
	--icon-invert: 0.3;
	--icon-invert-hover: 0.1;
}

/* Theme transition optimization */
body.theme-transitioning {
	/* Disable transitions during theme change to prevent flickering */
	*,
	*::before,
	*::after {
		transition: none !important;
	}
}

/* ========== Base Styles with Theme Transitions ========== */
* {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

/* Universal theme transition for all elements using CSS custom properties */
*,
*::before,
*::after {
	transition:
		background-color var(--transition),
		color var(--transition),
		border-color var(--transition),
		box-shadow var(--transition),
		filter var(--transition),
		opacity var(--transition);
}

html {
	box-sizing: border-box;
	scroll-behavior: smooth;
	scroll-snap-type: none;
}

*,
*:before,
*:after {
	box-sizing: inherit;
}

body {
	background: var(--bg-color);
	color: var(--text-color);
	line-height: 1.3;
	font-family: var(--font-sans);
	-webkit-font-smoothing: antialiased;
	overflow-x: hidden;
}

body:has(.progress-spinner.active) {
	overflow-y: hidden;
}

h1,
h2,
h3,
h4,
h5,
h6 {
	margin: 0 0 10px 0;
	color: var(--text-color-highlight);
}

h2 {
	font-weight: bold;
	font-size: 1.5em;
}

a {
	color: var(--accent-color);
	text-decoration: none;

	&:hover {
		color: var(--dark-accent);
	}
}

/* ========== Typography ========== */
.text-lg {
	font-size: clamp(18px, 5vw, 20px);
}

.heading-xl {
	font-size: clamp(40px, 7vw, 74px);
	line-height: 1.1;
}

.heading-lg {
	font-size: clamp(32px, 6vw, 48px);
}

.numbered-heading {
	display: flex;
	align-items: center;
	margin: 10px 0 40px;
	color: var(--accent-color);
	font-size: clamp(16px, 3vw, 20px);
	font-family: var(--font-mono);

	&::before {
		// content: '01.';
		margin-right: 10px;
		color: var(--accent-color);
		font-weight: 400;
	}
}
.cdk-overlay-container {
	z-index: 10000;
}

/* ========== Layout ========== */
section {
	position: relative;
	padding: 0px 2rem;
	min-height: 100vh;
	scroll-margin-top: 100px;
	scroll-snap-align: start;
}

.scroll-indicators {
	position: fixed;
	top: 50%;
	right: 30px;
	transform: translateY(-50%);
	z-index: 1000;

	.dot {
		transition: var(--transition);
		cursor: pointer;
		margin: 15px 0;
		border-radius: 50%;
		background-color: var(--text-color);
		width: 12px;
		height: 12px;

		&.active {
			transform: scale(1.4);
			background-color: var(--accent-color);
		}
	}
}

/* Scroll progress indicator */
.scroll-progress {
	position: fixed;
	top: 0;
	left: 0;
	z-index: 1001;
	background-color: var(--accent-color);
	height: 3px;
}

.container {
	padding: 0 50px;
}

/* ========== Media Queries ========== */
@media (max-width: 1024px) {
	section {
		padding: 80px 0;
	}

	.container {
		padding: 0 25px;
	}

	.numbered-heading {
		margin-bottom: 30px;
	}
}

@media print {
	body {
		background-color: white !important;
		color: black !important;
	}
}

/* ========== Material Overrides ========== */
.mat-card {
	background-color: var(--bg-color-secondary) !important;
	color: var(--text-color-secondary) !important;
}

.mat-toolbar {
	backdrop-filter: blur(10px) !important;
	background-color: rgba(10, 25, 47, 0.85) !important;
}

.mat-mdc-menu-panel {
	margin-top: 1rem !important;
	box-shadow: unset !important;
	border: 1.5px solid var(--bg-color-secondary) !important;
	border-radius: 0.5rem !important;
	background: var(--bg) !important;

	.mat-mdc-menu-item {
		color: var(--text-color) !important;

		&:hover {
			background: var(--bg-color-secondary) !important;
			color: var(--text-color-highlight) !important;
		}
	}

	.mat-mdc-menu-content {
		padding: 0 !important;
	}
}

.mat-mdc-menu-panel {
	.mat-mdc-menu-item {
		min-height: 40px !important;
	}
}

.dark-mode .mat-mdc-menu-panel {
	.mat-mdc-menu-item:hover {
		background-color: var(--bg-color-tertiary) !important;
	}
}

body.light-mode .mat-toolbar {
	background-color: rgba(245, 245, 245, 0.85) !important;
}

:host {
	display: flex;
	flex-direction: column;
	min-height: 100vh;
}

main {
	flex: 1;
	padding-bottom: var(--footer-height); //Space for fixed footer
}

::-webkit-scrollbar {
	width: var(--scrollbar-width);
}

::-webkit-scrollbar-track {
	background: var(--bg-color);
}

::-webkit-scrollbar-thumb {
	transition: var(--transition);
	border-radius: 4px;
	background: var(--text-color);

	&:hover {
		background: var(--accent-color);
	}
}

/* ========== Prefers Color Scheme Media Query ========== */
@media (prefers-color-scheme: dark) {
	:root.system-theme {
		--bg-color: var(--light-bg);
		--bg-color-secondary: var(--light-bg-secondary);
		--bg-color-tertiary: var(--light-bg-tertiary);
		--text-color: var(--light-text-secondary);
		--text-color-secondary: var(--light-text-tertiary);
		--text-color-highlight: var(--light-text);
		--accent-color: var(--light-accent);
		--border-color: var(--light-bg-tertiary);
	}
}
